<section class="discover">
  <aside class="discover-aside">
    <mat-card class="discover-aside__card">
      <mat-card-header>
        <mat-card-title class="discover-aside__title">
          Discover
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <mat-chip-listbox
          multiple
          [formControl]="genreControl"
          *ngIf="genresList$ | async as genres"
        >
          <mat-chip-option
            *ngFor="let genre of genres"
            color="primary"
            [value]="genre.id.toString()"
          >
            {{ genre.name }}
          </mat-chip-option>
        </mat-chip-listbox>
      </mat-card-content>
    </mat-card>
  </aside>

  <ng-container *ngIf="res$ | async as res">
    <div class="discover__content" *ngIf="res.tvs && res.tvs.total_results > 0">
      <div class="discover__grid">
        <app-media-card
          *ngFor="let tv of res.tvs.results; trackBy: mediaTrackBy"
          [title]="tv.name"
          [mediaType]="mediaType"
          [imagePath]="tv.poster_path"
          [voteAverage]="tv.vote_average"
          [releaseDate]="tv.first_air_date"
          [id]="tv.id"
        ></app-media-card>
      </div>

      <mat-paginator
        *ngIf="res.tvs.total_pages > 1"
        [length]="res.tvs.total_results"
        [pageSize]="pageSize"
        (page)="handlePageEvent($event)"
        aria-label="Select page"
        [pageIndex]="filters.page - 1"
      ></mat-paginator>
    </div>

    <div
      class="discover__content"
      *ngIf="res.movies && res.movies.total_results > 0"
    >
      <div class="discover__grid">
        <app-media-card
          *ngFor="let movie of res.movies.results; trackBy: mediaTrackBy"
          [title]="movie.title"
          [mediaType]="mediaType"
          [imagePath]="movie.poster_path"
          [voteAverage]="movie.vote_average"
          [releaseDate]="movie.release_date"
          [id]="movie.id"
        ></app-media-card>
      </div>

      <mat-paginator
        *ngIf="res.movies.total_pages > 1"
        [length]="res.movies.total_results"
        [pageSize]="pageSize"
        (page)="handlePageEvent($event)"
        aria-label="Select page"
        [pageIndex]="filters.page - 1"
      ></mat-paginator>
    </div>
  </ng-container>

  <mat-card *ngIf="noResult">
    <mat-card-content>
      <mat-card-title>There are no results for this request</mat-card-title>
    </mat-card-content>
  </mat-card>
</section>
